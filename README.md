# Demo Medical Database API

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –∫–ª–∏–Ω–∏–∫–æ–π —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏, –≤—Ä–∞—á–∞–º–∏, –ø—Ä–∏–µ–º–∞–º–∏ –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–º –∞–Ω–∞–º–Ω–µ–∑–æ–º.

## üöÄ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ü–æ–ª–Ω—ã–π CRUD** –¥–ª—è –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤, –≤—Ä–∞—á–µ–π, –ø—Ä–∏–µ–º–æ–≤ –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –∞–Ω–∞–º–Ω–µ–∑–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** Swagger/OpenAPI
- **SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- **CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Go** 1.19+
- **Gin** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **GORM** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Swagger** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **Make** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–±–æ—Ä–∫–æ–π

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Go 1.19 –∏–ª–∏ –≤—ã—à–µ
- Git

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone <your-repo-url>
cd demeda
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
go mod download
```

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–º–æ—â—å—é Make
```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
make

# –ò–ª–∏ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏
make build
make run
```

### –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫
```bash
go run main.go
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8080`

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
- **Swagger UI**: http://localhost:8080/swagger/index.html

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Swagger

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ swag –µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
go install github.com/swaggo/swag/cmd/swag@latest

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
swag init
```

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

- **–ü–∞—Ü–∏–µ–Ω—Ç—ã** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ü–∏–µ–Ω—Ç–∞—Ö –∫–ª–∏–Ω–∏–∫–∏
- **–í—Ä–∞—á–∏** - –¥–∞–Ω–Ω—ã–µ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤  
- **–ü—Ä–∏–µ–º—ã** - –∑–∞–ø–∏—Å–∏ –æ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –ø—Ä–∏–µ–º–∞—Ö
- **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–æ–≤ –∏ –æ–±—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
- **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∞–Ω–∞–º–Ω–µ–∑** - –∏—Å—Ç–æ—Ä–∏—è –±–æ–ª–µ–∑–Ω–µ–π –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π

### –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ü–∞—Ü–∏–µ–Ω—Ç—ã
- `GET /patients` - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- `GET /patients/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞—Ü–∏–µ–Ω—Ç–µ
- `POST /patients` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- `PUT /patients/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- `DELETE /patients/:id` - —É–¥–∞–ª–µ–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞
- `GET /patients/:id/appointments` - –ø—Ä–∏–µ–º—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞
- `GET /patients/:id/medical-history` - –∞–Ω–∞–º–Ω–µ–∑ –ø–∞—Ü–∏–µ–Ω—Ç–∞

#### –í—Ä–∞—á–∏
- `GET /doctors` - —Å–ø–∏—Å–æ–∫ –≤—Ä–∞—á–µ–π
- `GET /doctors/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–∞—á–µ
- `GET /doctors/:id/appointments` - –ø—Ä–∏–µ–º—ã –≤—Ä–∞—á–∞

#### –ü—Ä–∏–µ–º—ã
- `GET /appointments` - —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–µ–º–æ–≤ (—Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π)
- `GET /appointments/:id` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–∏–µ–º–µ
- `POST /appointments` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–µ–º–∞
- `PUT /appointments/:id` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–µ–º–∞
- `DELETE /appointments/:id` - —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–µ–º–∞
- `GET /appointments/:id/tests` - —Ç–µ—Å—Ç—ã –ø—Ä–∏–µ–º–∞

#### –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –∞–Ω–∞–º–Ω–µ–∑
- `GET /medical_history` - —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π –∞–Ω–∞–º–Ω–µ–∑–∞
- `POST /medical_history` - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏
- `DELETE /medical_history/:id` - —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏

## üóÉ –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### Patient (–ü–∞—Ü–∏–µ–Ω—Ç)
```go
type Patient struct {
    ID             uint
    FullName       string
    BirthDate      time.Time
    Gender         string  // "male" –∏–ª–∏ "female"
    Phone          string
    Email          string
    Appointments   []Appointment
    MedicalHistory []MedicalHistory
}
```

### Doctor (–í—Ä–∞—á)
```go
type Doctor struct {
    ID             uint
    FullName       string
    Specialization string
    Phone          string
    Email          string
    Appointments   []Appointment
}
```

### Appointment (–ü—Ä–∏–µ–º)
```go
type Appointment struct {
    ID           uint
    PatientID    uint
    DoctorID     uint
    Date         time.Time
    Diagnosis    string
    Treatment    string
    Notes        string
    Patient      Patient
    Doctor       Doctor
    MedicalTests []MedicalTest
}
```

## üîß Make –∫–æ–º–∞–Ω–¥—ã

```bash
make          # –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
make build    # –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
make run      # –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
make clean    # –û—á–∏—Å—Ç–∫–∞ —Å–±–æ—Ä–∫–∏ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **–ü–æ—Ä—Ç**: 8080
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite (clinic.db)
- **CORS**: —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤—Å–µ –¥–æ–º–µ–Ω—ã

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.go                 # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ go.mod                  # –ú–æ–¥—É–ª–∏ Go
‚îú‚îÄ‚îÄ go.sum                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ Makefile               # –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏
‚îú‚îÄ‚îÄ clinic.db              # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger
    ‚îú‚îÄ‚îÄ docs.go
    ‚îú‚îÄ‚îÄ swagger.json
    ‚îî‚îÄ‚îÄ swagger.yaml
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**:
   ```bash
   make
   ```
3. **–û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é**: http://localhost:8080/swagger/index.html
4. **–ù–∞—á–Ω–∏—Ç–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API** –∏—Å–ø–æ–ª—å–∑—É—è Swagger UI

## üìä –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
- 5 –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
- 4 –≤—Ä–∞—á–∞ —Ä–∞–∑–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π
- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –ø—Ä–∏–µ–º—ã
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–æ–≤
- –ó–∞–ø–∏—Å–∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–≥–æ –∞–Ω–∞–º–Ω–µ–∑–∞

## üîç –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞
```bash
curl -X POST http://localhost:8080/patients \
  -H "Content-Type: application/json" \
  -d '{
    "full_name": "–ò–≤–∞–Ω–æ–≤ –ü–µ—Ç—Ä –°–∏–¥–æ—Ä–æ–≤–∏—á",
    "birth_date": "1980-05-15T00:00:00Z",
    "gender": "male",
    "phone": "+79990000000",
    "email": "ivanov@example.com"
  }'
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–µ–º–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
```bash
# –ü—Ä–∏–µ–º—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞
curl "http://localhost:8080/appointments?patient_id=1"

# –ü—Ä–∏–µ–º—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≤—Ä–∞—á–∞  
curl "http://localhost:8080/appointments?doctor_id=2"
```

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –ø–æ—Ä—Ç–∞
–ï—Å–ª–∏ –ø–æ—Ä—Ç 8080 –∑–∞–Ω—è—Ç, –∏–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main()`:
```go
router.Run(":8081") // –∏–ª–∏ –¥—Ä—É–≥–æ–π —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ä—Ç
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
–£–¥–∞–ª–∏—Ç–µ —Ñ–∞–π–ª `clinic.db` –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:
```bash
make clean
make
```

## üë• –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
1. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤ `main.go`
2. –î–æ–±–∞–≤—å—Ç–µ Swagger –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏
3. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é: `swag init`
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑ Swagger UI

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
```go
// @Summary –û–ø–∏—Å–∞–Ω–∏–µ
// @Tags tag-name
// @Accept json
// @Produce json
// @Param param-name path/query int true "–û–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞"
// @Success 200 {object} Model
// @Router /endpoint [get]
func handler(c *gin.Context) {
    // –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
}
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[–£–∫–∞–∑–∞—Ç—å –ª–∏—Ü–µ–Ω–∑–∏—é –ø—Ä–æ–µ–∫—Ç–∞]

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PostgreSQL –∏–ª–∏ –¥—Ä—É–≥—É—é production –ë–î
- –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è (dev/staging/prod)
